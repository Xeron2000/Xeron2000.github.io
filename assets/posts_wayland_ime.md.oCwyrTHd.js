import{_ as e,c as n,o as l,ag as t}from"./chunks/framework.C4qplGO_.js";const u=JSON.parse('{"title":"Wayland + Electron 中文输入法在高频输入下乱序的解决方案","description":"记录在 Wayland 下 Electron 应用中文输入在高频输入时出现乱序的问题，及通过 ~/.config/electron-flags.conf 启用 Wayland IME 的通用解决方案","frontmatter":{"date":"2025-08-30T00:00:00.000Z","title":"Wayland + Electron 中文输入法在高频输入下乱序的解决方案","category":"linux","tags":["Wayland","Electron","IME","Fcitx5","Arch Linux"],"description":"记录在 Wayland 下 Electron 应用中文输入在高频输入时出现乱序的问题，及通过 ~/.config/electron-flags.conf 启用 Wayland IME 的通用解决方案"},"headers":[],"relativePath":"posts/wayland_ime.md","filePath":"posts/wayland_ime.md"}'),o={name:"posts/wayland_ime.md"};function s(r,a,i,c,d,p){return l(),n("div",null,a[0]||(a[0]=[t(`<p>在 Wayland + Electron + 中文输入法（如 Fcitx5）环境中，部分应用在高频打字时会出现输入事件被乱序处理的现象：打字速度快会错位、重排，慢速输入则一切正常。该问题可在多款 Electron 应用中复现，与 Electron 在 Wayland/XWayland 下的输入通道与合成策略有关</p><p>相关讨论可参考：</p><ul><li><a href="https://github.com/CherryHQ/cherry-studio/issues/104" target="_blank" rel="noreferrer">Cherry Studio: Linux 的 Wayland 下不能切换 Fcitx5 输入法 #104</a></li></ul><h2 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h2><p>为 Electron 应用启用原生 Wayland IME 支持与 Ozone 平台特性。创建（或编辑）文件 <code>~/.config/electron-flags.conf</code>，写入以下内容：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>--enable-wayland-ime</span></span>
<span class="line"><span>--enable-features=WaylandWindowDecorations</span></span>
<span class="line"><span>--ozone-platform-hint=auto</span></span>
<span class="line"><span>--enable-features=UseOzonePlatform</span></span>
<span class="line"><span>--ozone-platform=wayland</span></span></code></pre></div><p>保存后，完全退出并重新启动目标 Electron 应用。大多数 Electron 应用会自动读取该文件并追加这些运行参数，从而在 Wayland 下启用原生输入法通道，避免高频输入时的乱序问题</p><h2 id="说明与提示" tabindex="-1">说明与提示 <a class="header-anchor" href="#说明与提示" aria-label="Permalink to &quot;说明与提示&quot;">​</a></h2><ul><li>以上配置适用于常见的 Electron 应用（AppImage、.deb、.rpm、Flatpak 版本多数同样适用）</li><li>如应用仍以 XWayland 方式运行，确保会话/启动器未强制 <code>--ozone-platform=x11</code>，并优先保持 <code>wayland</code></li><li>对于 Fcitx5 与 IBus 均有正向帮助；若你使用 Hyprland、Sway、KDE Wayland 等合成器，均可参考本方法</li></ul>`,9)]))}const f=e(o,[["render",s]]);export{u as __pageData,f as default};
